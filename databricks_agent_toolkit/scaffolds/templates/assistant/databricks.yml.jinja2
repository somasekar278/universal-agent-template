bundle:
  name: {{ name }}

sync:
  include:
    - "*.py"
    - "*.yaml"
    - "*.yml"
    - "*.txt"
    - "*.md"

resources:
  apps:
    {{ name }}:
      name: {{ name }}
      description: "{{ name }} - Context-Aware Assistant (L2)"
      source_code_path: .

targets:
  dev:
    mode: development
    default: true
    workspace:
      root_path: /Workspace/{{ '${workspace.current_user.userName}' }}/.bundle/{{ '${bundle.name}' }}/{{ '${bundle.target}' }}

  prod:
    mode: production
    workspace:
      root_path: /Workspace/{{ '${workspace.current_user.userName}' }}/.bundle/{{ '${bundle.name}' }}/{{ '${bundle.target}' }}
    permissions:
      - user_name: "{{ '${workspace.current_user.userName}' }}"
        level: CAN_MANAGE

variables:
  databricks_host:
    description: "Databricks workspace URL"
    default: ""  # e.g., "https://your-workspace.cloud.databricks.com"

  lakebase_host:
    description: "Lakebase PostgreSQL host (Autoscale recommended)"
    default: ""  # e.g., "ep-xxx.database.us-west-2.cloud.databricks.com"

  lakebase_database:
    description: "Lakebase database name"
    default: "agents"

  lakebase_user:
    description: "Lakebase username"
    default: ""  # Your Lakebase user

  lakebase_password:
    description: "Lakebase password"
    default: ""  # Your Lakebase password
